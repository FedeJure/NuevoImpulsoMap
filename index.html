<!doctype html>
<html lang="es">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Encuentros Nuevo Impulso - Argentina</title>
    <meta name="description"
        content="Mapa interactivo de Argentina que muestra puntos a partir de un CSV con RegiÃ³n, Barrio y DirecciÃ³n. Clustering inteligente y UI gamificada." />

    <!-- Fuentes y estilos -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&display=swap" rel="stylesheet">

    <!-- Leaflet -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
    <!-- Leaflet MarkerCluster -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.Default.css" />

    <link rel="stylesheet" href="./styles.css" />
</head>

<body>
    <header class="app-header">
        <div class="brand">
            <span class="logo">ðŸ‡¦ðŸ‡·</span>
            <h1>Encuentros Nuevo Impulso - Argentina</h1>
        </div>
        <div class="metrics">
            <div class="chip" title="Total de filas en CSV"><span id="stat-total">0</span> registros</div>
            <div class="chip" title="Puntos geocodificados"><span id="stat-geocoded">0</span> geocodificados</div>
            <div class="chip" title="Puntos visibles"><span id="stat-visible">0</span> visibles</div>
        </div>
    </header>

    <div id="map"></div>

    <aside class="control-panel">
        <div class="panel-section">
            <h2>Buscar</h2>
            <input id="search-input" class="search" type="search" placeholder="Filtrar por barrio o direcciÃ³n..." />
        </div>
        <div class="panel-section">
            <h2>Regiones</h2>
            <div id="regions-container" class="regions"></div>
        </div>
        <div class="panel-section">
            <h2>Progreso</h2>
            <div class="progress">
                <div id="progress-bar" class="bar" style="width:0%"></div>
            </div>
            <small id="progress-text">Esperando datos...</small>
        </div>
        <div class="panel-section subtle">
            <button id="reload-btn" class="btn">Recargar CSV</button>
            <button id="clear-cache-btn" class="btn ghost">Limpiar cachÃ©</button>
        </div>
    </aside>

    <footer class="app-footer">
        <div>
            Datos desde <code>data.csv</code> â€” Se geocodifica localmente con Nominatim (OSM) con cacheo y lÃ­mites
            responsables.
        </div>
        <div>
            Consejo: acercÃ¡ el zoom para expandir clusters. HacÃ© click en un punto para ver detalles.
        </div>
    </footer>

    <!-- Scripts externos -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <script src="https://unpkg.com/leaflet.markercluster@1.5.3/dist/leaflet.markercluster.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>

    <!-- App -->
    <script src="./app.js"></script>
</body>

</html>