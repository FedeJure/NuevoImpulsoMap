<!doctype html>
<html lang="es">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Encuentros Nuevo Impulso - Argentina</title>
    <meta name="description"
        content="Mapa interactivo de Argentina que muestra puntos a partir de un CSV con Región, Barrio y Dirección. Clustering inteligente y UI gamificada." />

    <!-- Fuentes y estilos -->
    <link rel="icon" href="/earth.png" type="image/x-icon">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&display=swap" rel="stylesheet">

    <!-- Leaflet -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
    <!-- Leaflet MarkerCluster -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.Default.css" />

    <link rel="stylesheet" href="./styles.css" />
</head>

<body>
    <header class="app-header">
        <div class="brand">
            <img src="./impulsito.png" alt="Impulsito" class="brand-logo" />
            <h1>Encuentros Nuevo Impulso - Argentina</h1>
        </div>
        <div class="metrics">
            <div class="chip" title="Puntos visibles"><span id="stat-visible">0</span> Encuentros de nuevo impulso!
            </div>
            <button id="toggle-panel-btn" class="btn ghost small" title="Mostrar/Ocultar panel">☰</button>
        </div>
    </header>

    <div id="map"></div>
    <img src="./nuevoimpulso2.png" alt="Impulsito" class="imageHeader" />
    <img src="./nuevoimpulso1.png" alt="Impulsito" class="imageHeaderright" />

    <aside class="control-panel collapsed" id="control-panel">
        <div class="panel-section">
            <h2>Agrupación</h2>
            <input id="cluster-range" type="range" min="0" max="100" step="1" value="40" style="width:100%" />
            <small class="hint">0 = sin agrupar, 100 = agrupar todo en un punto</small>
        </div>
        <div class="panel-section">
            <h2>Datos</h2>
            <div class="subtle" style="margin-bottom:8px;">
                <button id="select-csv-btn" class="btn">Seleccionar CSV</button>
                <input id="csv-file-input" type="file" accept=".csv,text/csv" style="display:none" />
            </div>
            <h2>Progreso</h2>
            <div class="progress">
                <div id="progress-bar" class="bar" style="width:0%"></div>
            </div>
            <small id="progress-text">Esperando selección de CSV...</small>
        </div>
        <div class="panel-section">
            <h2>Geolocalización</h2>
            <div class="subtle">
                <button id="save-csv-btn" class="btn ghost">Guardar CSV</button>
            </div>
        </div>
        <div class="panel-section subtle">
            <button id="clear-cache-btn" class="btn ghost">Borrar guardado</button>
        </div>
    </aside>

    <!-- Scripts externos -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <script src="https://unpkg.com/leaflet.markercluster@1.5.3/dist/leaflet.markercluster.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>

    <!-- App -->
    <script src="./app.js"></script>
</body>

</html>